<template>
  <div ref="globeEl" />
</template>

<script setup>
import { onMounted, ref } from 'vue'
import Globe from 'globe.gl'

const globeEl = ref(null)
const emit = defineEmits(['formation-click'])

const formations = [
  {
    name: 'Angers',
    lat: 47.4717,
    lng: -0.620,
    company: "Gifi",
    logo: "/assets/images/company/gifi.png",
    date: "setp 2013 - aout 2016",
    duration: "3 ans",
    description: "Gifi est une enseigne franÃ§aise spÃ©cialisÃ©e dans la distribution de produits Ã  petits prix pour la maison, la dÃ©coration, les loisirs et le quotidien. Avec un rÃ©seau de centaines de magasins Ã  travers la France, Gifi propose une large gamme dâ€™articles accessibles pour amÃ©liorer le cadre de vie de ses clients.",
    role:"Chez Gifi, jâ€™ai occupÃ© le poste dâ€™employÃ© polyvalent au sein du rayon Loisirs. Mes missions consistaient Ã  assurer la mise en rayon des produits, veiller Ã  leur bonne prÃ©sentation, gÃ©rer les stocks, et accompagner les clients dans leurs recherches. Jâ€™Ã©tais Ã©galement amenÃ© Ã  participer Ã  la rÃ©organisation des rayons selon les opÃ©rations commerciales en cours, tout en veillant Ã  la propretÃ© et au bon agencement de lâ€™espace de vente.",
    listExp: [
      "accueil client",
      "encaissement clien",
      "gestion d'Ã©quipe",
      "mise en place d'un rayon",
    ]
  },
  {
    name: 'Montpellier',
    lat: 43.5868,
    lng: 3.8530,
    company: "Foir Fouille",
    logo: "/assets/images/company/foirfouille.png",
    date: "sept 2016 - sept 2018",
    duration: "5 ans",
    description: "La Foirâ€™Fouille est une chaÃ®ne de magasins franÃ§aise dÃ©diÃ©e Ã  lâ€™Ã©quipement et Ã  la dÃ©coration de la maison. Elle offre un large choix de produits dans des univers variÃ©s tels que la cuisine, le rangement, les fÃªtes, le textile et les meubles, en mettant lâ€™accent sur lâ€™accessibilitÃ©, le renouvellement frÃ©quent des collections et les bons plans.",
    role:"Ã€ La Foirâ€™Fouille, jâ€™ai travaillÃ© en tant quâ€™employÃ© polyvalent dans le rayon Cuisine. Je mâ€™occupais de la rÃ©ception des marchandises, du rÃ©assort et de la mise en avant des produits selon les directives merchandising. Jâ€™assurais Ã©galement le conseil client, en veillant Ã  proposer des solutions adaptÃ©es Ã  leurs besoins. Mon rÃ´le impliquait rigueur, sens de lâ€™organisation et dynamisme pour maintenir un rayon attractif et bien approvisionnÃ©.",
    listExp: [
      "accueil client",
      "encaissement clien",
      "gestion d'Ã©quipe",
      "mise en place d'un rayon",
      "gestion des stocks",
      "gestion des fournisseurs"
    ]
  },
  {
    name: 'Saint lÃ©onard de noblat',
    lat: 45.8374,
    lng: 1.4893,
    company: 'Dynaidev',
    logo: "/assets/images/company/dynaidev-logo.png",
    date: "sept 2019 - octobre 2020",
    duration: "1 ans",
    description: 'Dynaidev',
    role: "DÃ©veloppeur en alternance chez Dynaidev, jâ€™ai eu lâ€™opportunitÃ© de travailler sur divers projets, principalement en PHP et Symfony. Jâ€™ai participÃ© Ã  la crÃ©ation dâ€™applications web sur mesure pour des clients variÃ©s, en mettant lâ€™accent sur la qualitÃ© du code et lâ€™expÃ©rience utilisateur. Mon rÃ´le impliquait Ã©galement la collaboration avec les Ã©quipes de dÃ©veloppement pour assurer une intÃ©gration fluide des fonctionnalitÃ©s.",
    listExp: [
      "Symfony",
      "PHP",
      "MySQL",
      "React",
      "wordpress",
      "encadrement d'une Ã©quipe"
    ]
  },
  {
    name: 'Rennes',
    lat: 48.0917,
    lng: -1.6331,
    company: "Cyim",
    logo: "/assets/images/company/logo_CYIM_RVB.svg",
    date: "nov 2020 - aout 2025",
    duration: "5 ans",
    description: "Cyim est une sociÃ©tÃ© de services informatiques spÃ©cialisÃ©e dans lâ€™accompagnement des sociÃ©tÃ©s savantes pour la crÃ©ation de leurs sites web institutionnels ainsi que la gestion de leurs congrÃ¨s.",
    role:"Jâ€™ai Ã©tÃ© recrutÃ© en tant que dÃ©veloppeur Drupal pour participer Ã  la mise en place de plateformes web dÃ©diÃ©es aux congrÃ¨s virtuels et aux sites institutionnels. Par la suite, jâ€™ai intÃ©grÃ© pendant trois ans la nouvelle Ã©quipe Registration, avec pour mission de dÃ©velopper une interface utilisateur en Vue 3 permettant la gestion des congressistes : crÃ©ation de badges, ajout de nouveaux intervenants, import/export de donnÃ©es via fichiers CSV, gestion des paiements et de leur historique, etc. En complÃ©ment, jâ€™ai collaborÃ© avec lâ€™Ã©quipe mobile pour dÃ©velopper une application Flutter, dÃ©ployÃ©e sur Android et affichÃ©e sur un Ã©cran 7 pouces connectÃ© Ã  un Raspberry Pi 4. Cette application permet aux congressistes de sâ€™enregistrer de maniÃ¨re autonome et dâ€™imprimer leur badge en scannant un QR code reÃ§u en amont de lâ€™Ã©vÃ©nement.",
    listExp: [
      "Drupal",
      "VueJs",
      "Flutter",
      "mise en place des solutions techniques en congrÃ¨s",
      "installation du rÃ©seaux",
      "accompagnement client grace au solution mise en place",
      "rÃ©pondre Ã  des diffÃ©rentes problematiques rencontrÃ©es",
      "installation d'un matÃ©riel de gestion de congrÃ¨s (android,flutter, raspberryP4, imprimante)",
    ]
  }
]

onMounted(() => {
  const globe = Globe()(globeEl.value)
    .globeImageUrl('//unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
    .htmlElementsData(formations)
    .htmlLat(d => d.lat)
    .htmlLng(d => d.lng)
    .htmlElement(d => {
      const el = document.createElement('div')
      el.innerHTML = 'ðŸ“'
      el.style.color = 'red'
      el.style.position = 'absolute';
      el.style.zIndex = '10'; // ou plus
      el.style.pointerEvents = 'auto'; // trÃ¨s important
      el.style.cursor = 'pointer'
      el.style.fontSize = '24px'
      el.title = d.name
      el.onclick = () => emit('formation-click', d)
        return el
      })
  
    globe.pointOfView({ lat: 46.5, lng: 2.2, altitude: 0.4 }, 3000)
})
</script>